import scanner
import optparse

parser = optparse.OptionParser()

parser.add_option("-l", "--link", dest="target_url")
(options, arguments) = parser.parse_args()

target_url = options.target_url

if str(target_url):
    links_to_ignore = [target_url + "logout.php"]
    data_dict = {"username": "admin", "password": "password", "Login": "Submit"}

    vuln_scanner = scanner.Scanner(target_url, links_to_ignore)
    vuln_scanner.session.post(target_url + "login.php", data=data_dict)

    vuln_scanner.crawl()
    vuln_scanner.run_scan()

else:
    print('Not a valid link')